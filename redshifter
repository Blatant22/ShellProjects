#!/bin/bash

#----------------------------------------------------------------------------------
# Project Name      - miscellaneous/redshifter
# Started On        - Tue  3 Oct 19:14:37 BST 2017
# Last Change       - Thu 15 Feb 22:48:24 GMT 2018
# Author E-Mail     - terminalforlife@yahoo.com
# Author GitHub     - https://github.com/terminalforlife
#----------------------------------------------------------------------------------
# Effective and simple tool to manually adjust the gamma via Redshift.
#
# IMPORTANT:
#
# This small script assumes you have redshift installed and available. Also assumed
# is that you'll be using this script via keyboard shortcuts, not terminals.
#
# Calling bash to avoid dependencies and to make use of bash syntax.
#
# SYNTAX:     redshifter [OPT]
#
# OPT:        --increment|-i N        - Increment gamma by N integer.
#             --decrement|-d N        - Decrement gamma by N integer.
#             --reset|-r              - Reset to the default.
#----------------------------------------------------------------------------------

BUFFER="/tmp/redshifter.tmp"

[ -f "$BUFFER" -o -r "$BUFFER" ] || {
	GAMMAS_NOW=6500
	printf "%d\n" "6500" > "$BUFFER"
} && GAMMAS_NOW=`< "$BUFFER"`

case "$1" in
	--reset|-r)
		printf "%d\n" "6500" > "$BUFFER"
		/usr/bin/redshift -o -O 6500K ;;
	--increment|-i)
		TEMP=$(( GAMMAS_NOW + $2 ))
		[ $TEMP -gt 25000 ] && break
		printf "%d\n" "$TEMP" > "$BUFFER"
		/usr/bin/redshift -o -O ${TEMP}K ;;
	--decrement|-d)
		TEMP=$(( GAMMAS_NOW - $2 ))
		[ $TEMP -lt 1000 ] && break
		printf "%d\n" "$TEMP" > "$BUFFER"
		/usr/bin/redshift -o -O ${TEMP}K ;;
esac

# vim: noexpandtab colorcolumn=80 tabstop=8 noswapfile nobackup

# vim: noexpandtab colorcolumn=84 tabstop=8 noswapfile nobackup
